# ğŸ‹ï¸ Check Gym - API

API RESTful para sistema de check-in em academias inspirado no Gympass, desenvolvida aplicando os princÃ­pios SOLID e arquitetura limpa com foco em manutenibilidade e testabilidade.

## ğŸ“‹ Sobre o Projeto

O Check Gym Ã© uma API completa para gerenciamento de check-ins em academias, similar ao Gympass. O projeto foi desenvolvido com foco na aplicaÃ§Ã£o prÃ¡tica dos princÃ­pios SOLID, demonstrando uma arquitetura robusta, testÃ¡vel e extensÃ­vel para sistemas de grande escala.

### ğŸ¯ Objetivos TÃ©cnicos do Projeto

- **Aplicar princÃ­pios SOLID** na prÃ¡tica com arquitetura orientada a objetos
- **Implementar Clean Architecture** com separaÃ§Ã£o clara de responsabilidades
- **Desenvolver sistema de autenticaÃ§Ã£o** JWT com refresh tokens
- **Criar cobertura de testes completa** com testes unitÃ¡rios e E2E
- **Implementar validaÃ§Ã£o geogrÃ¡fica** para check-ins baseados em localizaÃ§Ã£o
- **Demonstrar padrÃµes de design** como Repository, Factory e Dependency Injection

## ğŸš€ Desenvolvido durante curso SOLID - Rocketseat

Este projeto foi desenvolvido durante o curso "API Node.js com SOLID" da Rocketseat, focado na aplicaÃ§Ã£o prÃ¡tica dos princÃ­pios SOLID em um sistema real. O projeto demonstra como estruturar aplicaÃ§Ãµes Node.js escalÃ¡veis seguindo as melhores prÃ¡ticas de arquitetura de software.

## âœ¨ Principais Funcionalidades

### ğŸ‘¤ UsuÃ¡rios
- **ğŸ“ Cadastro de usuÃ¡rios** - Registro com validaÃ§Ã£o de dados
- **ğŸ” AutenticaÃ§Ã£o JWT** - Login seguro com access e refresh tokens  
- **ğŸ‘¤ Perfil do usuÃ¡rio** - VisualizaÃ§Ã£o e atualizaÃ§Ã£o de dados pessoais

### ğŸ¢ Academias
- **ğŸ” Busca de academias** - Listagem e busca por proximidade
- **ğŸ“ Busca por localizaÃ§Ã£o** - Encontrar academias prÃ³ximas por coordenadas
- **ğŸ“‹ Listagem geral** - Visualizar todas as academias disponÃ­veis
- **â• Cadastro de academias** - Registro de novas unidades

### âœ… Check-ins
- **ğŸ“ Check-in por localizaÃ§Ã£o** - ValidaÃ§Ã£o de proximidade geogrÃ¡fica
- **ğŸ“Š HistÃ³rico de check-ins** - Listagem completa de check-ins do usuÃ¡rio
- **ğŸ“ˆ MÃ©tricas pessoais** - Quantidade total de check-ins realizados
- **âœ… ValidaÃ§Ã£o de check-ins** - Sistema de confirmaÃ§Ã£o (admin)

### ğŸ”’ Regras de NegÃ³cio
- **Limite diÃ¡rio**: Apenas 1 check-in por usuÃ¡rio por dia
- **Proximidade**: Check-in somente dentro de 100m da academia
- **ValidaÃ§Ã£o temporal**: Check-ins podem ser validados atÃ© 20 minutos apÃ³s criaÃ§Ã£o
- **AutenticaÃ§Ã£o obrigatÃ³ria**: Todas as operaÃ§Ãµes requerem usuÃ¡rio autenticado

## ğŸš€ Tecnologias Utilizadas

### Core & Framework
- **Node.js** - Runtime JavaScript server-side
- **TypeScript** - Tipagem estÃ¡tica para maior seguranÃ§a
- **Fastify** - Framework web performÃ¡tico com arquitetura plugin-based
- **Zod** - ValidaÃ§Ã£o de esquemas TypeScript-first

### Banco de Dados & ORM
- **PostgreSQL** - Banco de dados relacional robusto
- **Prisma ORM** - ORM type-safe com migrations e cliente gerado
- **Prisma Studio** - Interface visual para administraÃ§Ã£o do banco

### AutenticaÃ§Ã£o & SeguranÃ§a
- **Fastify JWT** - ImplementaÃ§Ã£o JWT otimizada
- **Fastify Cookie** - Gerenciamento seguro de cookies
- **bcryptjs** - Hash seguro de senhas

### DocumentaÃ§Ã£o & ValidaÃ§Ã£o
- **Fastify Swagger** - DocumentaÃ§Ã£o automÃ¡tica OpenAPI
- **Fastify Swagger UI** - Interface interativa da API
- **Fastify Type Provider Zod** - IntegraÃ§Ã£o Zod + Fastify

### Testes & Qualidade
- **Vitest** - Framework de testes moderno e rÃ¡pido
- **Supertest** - Testes de integraÃ§Ã£o HTTP
- **ConfiguraÃ§Ã£o Multi-projeto** - SeparaÃ§Ã£o entre testes unitÃ¡rios e E2E

### Build & Desenvolvimento
- **TSX** - ExecuÃ§Ã£o TypeScript 
- **TSUP** - Bundler otimizado para TypeScript
- **Biome** - Linter e formatter performÃ¡tico

## ğŸ“ Estrutura do Projeto (Arquitetura SOLID)

```
src/
â”œâ”€â”€ erros                   # Erros customizados
â”œâ”€â”€ http/                   # Camada de apresentaÃ§Ã£o (HTTP)
â”‚   â”œâ”€â”€ controllers/        # Controllers das rotas
â”œâ”€â”€ middlewares             # Middlewares customizados
â”œâ”€â”€ repositories/           # Camada de dados (Repository Pattern)
â”‚   â”œâ”€â”€ prisma/             # ImplementaÃ§Ãµes Prisma
â”‚   â””â”€â”€ in-memory/          # ImplementaÃ§Ãµes para testes
â”œâ”€â”€ schemas/                # schemas das rotas
â”‚   â”œâ”€â”€ users/              # schema de usuÃ¡rios
â”‚   â”œâ”€â”€ gyms/               # schema de academias
â”‚   â””â”€â”€ check-ins/          # schema de check-ins
â”œâ”€â”€ use-cases/              # Camada de aplicaÃ§Ã£o (Use Cases)
â”‚   â”œâ”€â”€ users/              # Casos de uso de usuÃ¡rios
â”‚   â”œâ”€â”€ gyms/               # Casos de uso de academias
â”‚   â””â”€â”€ check-ins/          # Casos de uso de check-ins
â”œâ”€â”€ lib/                    # UtilitÃ¡rios e configuraÃ§Ãµes
â”œâ”€â”€ utils/                  # FunÃ§Ãµes auxiliares
â””â”€â”€ env/                    # ValidaÃ§Ã£o de variÃ¡veis de ambiente
```

## ğŸ§± AplicaÃ§Ã£o dos PrincÃ­pios SOLID

### **S** - Single Responsibility Principle
- **Use Cases isolados**: Cada caso de uso tem uma Ãºnica responsabilidade
- **Controllers especÃ­ficos**: Um controller por funcionalidade
- **Repositories focados**: Cada repository gerencia uma entidade

### **O** - Open/Closed Principle  
- **Interfaces de Repository**: Abertas para extensÃ£o, fechadas para modificaÃ§Ã£o
- **EstratÃ©gias de hash**: Possibilidade de trocar algoritmos sem alterar cÃ³digo

### **L** - Liskov Substitution Principle
- **ImplementaÃ§Ãµes intercambiÃ¡veis**: Repositories Prisma/InMemory substituÃ­veis
- **Contratos bem definidos**: Interfaces respeitadas em todas implementaÃ§Ãµes

### **I** - Interface Segregation Principle
- **Interfaces especÃ­ficas**: Cada repository expÃµe apenas mÃ©todos necessÃ¡rios
- **Contratos mÃ­nimos**: Clientes dependem apenas do que realmente usam

### **D** - Dependency Inversion Principle
- **InjeÃ§Ã£o de dependÃªncia**: Use cases recebem repositories via construtor
- **AbstraÃ§Ãµes**: DependÃªncia de interfaces, nÃ£o de implementaÃ§Ãµes concretas

## ğŸ”§ InstalaÃ§Ã£o e ExecuÃ§Ã£o

1. **Clone o repositÃ³rio**
```bash
git clone <url-do-repositorio>
cd check-gym
```

2. **Instale as dependÃªncias**
```bash
pnpm install
```

3. **Configure as variÃ¡veis de ambiente**
```bash
cp .env.example .env
```

4. **Gere o cliente Prisma**
```bash
pnpm db:generate
```

5. **Execute as migrations**
```bash
pnpm db:migrate
```

6. **Execute o servidor**
```bash
pnpm run dev
```

A API estarÃ¡ disponÃ­vel em `http://localhost:3333`
DocumentaÃ§Ã£o Swagger em `http://localhost:3333/docs`

## ğŸ“¦ Scripts DisponÃ­veis

### Desenvolvimento
- `pnpm run dev` - Rodar servidor em desenvolvimento
- `pnpm run build` - Build para produÃ§Ã£o
- `pnpm run start` - Executa build de produÃ§Ã£o

### Banco de Dados
- `pnpm run db:generate` - Gera cliente Prisma
- `pnpm run db:migrate` - Executa migrations de desenvolvimento
- `pnpm run db:deploy` - Deploy de migrations em produÃ§Ã£o
- `pnpm run db:studio` - Interface visual do banco

### Testes
- `pnpm run test` - Testes unitÃ¡rios
- `pnpm run test:e2e` - Testes end-to-end
- `pnpm run test:watch` - Testes unitÃ¡rios em modo watch
- `pnpm run test:e2e:watch` - Testes E2E em modo watch

## ğŸ”— Principais Endpoints

### ğŸ” AutenticaÃ§Ã£o
- `POST /users` - Cadastro de usuÃ¡rio
- `POST /sessions` - Login (autenticaÃ§Ã£o)
- `PATCH /token/refresh` - Renovar access token
- `GET /me` - Perfil do usuÃ¡rio logado

### ğŸ¢ Academias  
- `GET /gyms/search` - Buscar academias por nome
- `GET /gyms/nearby` - Buscar academias prÃ³ximas
- `POST /gyms` - Cadastrar nova academia

### âœ… Check-ins
- `GET /check-ins/history` - HistÃ³rico de check-ins
- `GET /check-ins/metrics` - MÃ©tricas do usuÃ¡rio
- `POST /gyms/{gymId}/check-ins` - Realizar check-in
- `PATCH /check-ins/{checkInId}/validate` - Validar check-in

## ğŸ”— Links Relacionados

- [DocumentaÃ§Ã£o do Fastify](https://fastify.dev/)
- [DocumentaÃ§Ã£o do Prisma](https://www.prisma.io/docs/)
- [DocumentaÃ§Ã£o do Vitest](https://vitest.dev/)
- [PrincÃ­pios SOLID Explicados](https://blog.rocketseat.com.br/solid-o-que-e/)

---

**ğŸ’¼ Projeto desenvolvido como demonstraÃ§Ã£o prÃ¡tica dos princÃ­pios SOLID**

Demonstra proficiÃªncia em: Arquitetura Limpa, SOLID, Node.js, TypeScript, Fastify, Prisma, JWT, testes automatizados e padrÃµes de design orientados a objetos.